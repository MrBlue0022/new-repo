<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spaceship Side-Scroller</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

        body {
            margin: 0;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(to bottom, #1a1a2e, #0f0f1c); /* Dark space background */
            font-family: 'Press Start 2P', cursive;
            color: #fff;
            user-select: none; /* Prevent text selection */
        }

        .game-container {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: #0d0d1a; /* Even darker background for game area */
            border: 5px solid #4a90e2; /* Neon blue border */
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(74, 144, 226, 0.7); /* Glowing effect */
            overflow: hidden;
            padding: 20px;
            box-sizing: border-box;
            width: 95vw; /* Responsive width */
            max-width: 800px; /* Max width for larger screens */
            aspect-ratio: 16 / 9; /* Maintain aspect ratio */
        }

        canvas {
            background-color: #000; /* Black canvas background for space */
            display: block;
            border-radius: 10px;
            width: 100%;
            height: 100%;
        }

        .game-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
            z-index: 10;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
        }

        .overlay-title {
            font-size: clamp(1.5rem, 5vw, 3rem); /* Responsive font size */
            margin-bottom: 20px;
            color: #7ed957; /* Green for "Game Over" */
            text-shadow: 0 0 15px rgba(126, 217, 87, 0.8);
        }

        .overlay-score {
            font-size: clamp(1rem, 3vw, 2rem);
            margin-bottom: 30px;
            color: #fff;
        }

        .button {
            background-color: #4a90e2; /* Neon blue button */
            color: #fff;
            border: none;
            padding: 15px 30px;
            font-family: 'Press Start 2P', cursive;
            font-size: clamp(0.8rem, 2.5vw, 1.2rem);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(74, 144, 226, 0.5);
            margin-top: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .button:hover {
            background-color: #357bd9;
            box-shadow: 0 8px 20px rgba(74, 144, 226, 0.7);
            transform: translateY(-3px);
        }

        .button:active {
            transform: translateY(0);
            box-shadow: 0 3px 10px rgba(74, 144, 226, 0.5);
        }

        .score-display {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: clamp(1rem, 3vw, 2rem);
            color: #fff;
            z-index: 5;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        /* Mobile responsiveness adjustments */
        @media (max-width: 600px) {
            .game-container {
                padding: 10px;
                width: 98vw;
            }
            .overlay-title {
                font-size: 1.8rem;
            }
            .overlay-score {
                font-size: 1.2rem;
            }
            .button {
                padding: 12px 25px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="score-display" id="scoreDisplay">SCORE: 0</div>
        <canvas id="gameCanvas"></canvas>

        <div class="game-overlay" id="startOverlay">
            <h1 class="overlay-title">SPACESHIP DODGE</h1>
            <p class="overlay-score">Fly between the buildings!</p>
            <button class="button" id="startButton">START GAME</button>
            <p class="overlay-score" style="font-size: 0.8em; margin-top: 20px;">Press SPACE or click to fly up!</p>
        </div>

        <div class="game-overlay" id="gameOverOverlay" style="display: none;">
            <h1 class="overlay-title">GAME OVER!</h1>
            <p class="overlay-score" id="finalScore">SCORE: 0</p>
            <button class="button" id="restartButton">RESTART</button>
        </div>
    </div>

    <script>
        // Get canvas and context
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Get UI elements
        const scoreDisplay = document.getElementById('scoreDisplay');
        const startOverlay = document.getElementById('startOverlay');
        const gameOverOverlay = document.getElementById('gameOverOverlay');
        const finalScoreDisplay = document.getElementById('finalScore');
        const startButton = document.getElementById('startButton');
        const restartButton = document.getElementById('restartButton');

        // Game variables
        let gameRunning = false;
        let score = 0;
        let animationFrameId;

        // Spaceship properties
        const spaceship = {
            x: 50,
            y: canvas.height / 2,
            width: 60, // Increased width for F-16 shape
            height: 30, // Increased height for F-16 shape
            dy: 0, // vertical velocity
            gravity: 0.3,
            lift: -6,
            draw: function() {
                ctx.fillStyle = '#FF0000'; // Red color for the F-16

                ctx.beginPath();
                // Main body of the F-16 (simplified) - flipped horizontally
                ctx.moveTo(this.x + this.width, this.y + this.height / 2); // Nose tip (now on the right)
                ctx.lineTo(this.x + this.width * 0.3, this.y); // Top front wing (now on the left)
                ctx.lineTo(this.x, this.y); // Top back (now on the left)
                ctx.lineTo(this.x + this.width * 0.1, this.y + this.height * 0.2); // Tail top (now on the left)
                ctx.lineTo(this.x + this.width * 0.1, this.y + this.height * 0.8); // Tail bottom (now on the left)
                ctx.lineTo(this.x, this.y + this.height); // Bottom back (now on the left)
                ctx.lineTo(this.x + this.width * 0.3, this.y + this.height); // Bottom front wing (now on the left)
                ctx.closePath();
                ctx.fill();

                // Cockpit (blue) - adjusted position
                ctx.fillStyle = '#4a90e2';
                ctx.beginPath();
                ctx.arc(this.x + this.width * 0.4, this.y + this.height / 2, this.width * 0.1, 0, Math.PI * 2);
                ctx.fill();

                // Small wing/stabilizer (optional, for more detail) - adjusted position
                ctx.fillStyle = '#CC0000'; // Darker red for detail
                ctx.beginPath();
                ctx.moveTo(this.x + this.width * 0.2, this.y + this.height * 0.3);
                ctx.lineTo(this.x + this.width * 0.1, this.y + this.height * 0.2);
                ctx.lineTo(this.x + this.width * 0.1, this.y + this.height * 0.8);
                ctx.lineTo(this.x + this.width * 0.2, this.y + this.height * 0.7);
                ctx.closePath();
                ctx.fill();
            },
            update: function() {
                this.dy += this.gravity;
                this.y += this.dy;

                // Prevent spaceship from going off top/bottom
                if (this.y + this.height > canvas.height) {
                    this.y = canvas.height - this.height;
                    this.dy = 0;
                    if (gameRunning) gameOver();
                }
                if (this.y < 0) {
                    this.y = 0;
                    this.dy = 0;
                    if (gameRunning) gameOver();
                }
            },
            flyUp: function() {
                this.dy = this.lift;
            }
        };

        // Building properties
        const buildings = [];
        const buildingWidth = 80;
        const buildingGap = 200; // Vertical gap between top and bottom building
        const buildingSpeed = 3;
        const buildingSpawnInterval = 1500; // Milliseconds
        let lastBuildingSpawnTime = 0;

        function createBuilding() {
            const minHeight = 50;
            const maxHeight = canvas.height - buildingGap - minHeight;
            const topHeight = Math.floor(Math.random() * (maxHeight - minHeight + 1)) + minHeight;
            const bottomHeight = canvas.height - topHeight - buildingGap;

            buildings.push({
                x: canvas.width,
                topY: 0,
                topHeight: topHeight,
                bottomY: canvas.height - bottomHeight,
                bottomHeight: bottomHeight,
                passed: false // To track if spaceship has passed this building for scoring
            });
        }

        function drawBuildings() {
            ctx.fillStyle = '#555'; // Grey buildings
            ctx.strokeStyle = '#333'; // Darker grey outline
            ctx.lineWidth = 2;

            buildings.forEach(b => {
                // Top building
                ctx.beginPath();
                ctx.roundRect(b.x, b.topY, buildingWidth, b.topHeight, 5); // Rounded corners
                ctx.fill();
                ctx.stroke();

                // Bottom building
                ctx.beginPath();
                ctx.roundRect(b.x, b.bottomY, buildingWidth, b.bottomHeight, 5); // Rounded corners
                ctx.fill();
                ctx.stroke();
            });
        }

        function updateBuildings() {
            // Move buildings
            for (let i = buildings.length - 1; i >= 0; i--) {
                buildings[i].x -= buildingSpeed;

                // Check if building is off-screen
                if (buildings[i].x + buildingWidth < 0) {
                    buildings.splice(i, 1); // Remove building
                }

                // Check for scoring
                if (!buildings[i].passed && buildings[i].x + buildingWidth < spaceship.x) {
                    score++;
                    scoreDisplay.textContent = `SCORE: ${score}`;
                    buildings[i].passed = true;
                }
            }

            // Spawn new buildings
            const currentTime = Date.now();
            if (currentTime - lastBuildingSpawnTime > buildingSpawnInterval) {
                createBuilding();
                lastBuildingSpawnTime = currentTime;
            }
        }

        // Collision detection
        function checkCollision() {
            for (let i = 0; i < buildings.length; i++) {
                const b = buildings[i];

                // Check collision with top building
                if (spaceship.x < b.x + buildingWidth &&
                    spaceship.x + spaceship.width > b.x &&
                    spaceship.y < b.topY + b.topHeight) {
                    gameOver();
                    return true;
                }

                // Check collision with bottom building
                if (spaceship.x < b.x + buildingWidth &&
                    spaceship.x + spaceship.width > b.x &&
                    spaceship.y + spaceship.height > b.bottomY) {
                    gameOver();
                    return true;
                }
            }
            return false;
        }

        // Game loop
        function gameLoop() {
            if (!gameRunning) return;

            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Update and draw spaceship
            spaceship.update();
            spaceship.draw();

            // Update and draw buildings
            updateBuildings();
            drawBuildings();

            // Check for collisions
            checkCollision();

            // Request next frame
            animationFrameId = requestAnimationFrame(gameLoop);
        }

        // Start game function
        function startGame() {
            gameRunning = true;
            score = 0;
            scoreDisplay.textContent = `SCORE: ${score}`;
            buildings.length = 0; // Clear existing buildings
            spaceship.y = canvas.height / 2; // Reset spaceship position
            spaceship.dy = 0; // Reset spaceship velocity
            lastBuildingSpawnTime = Date.now(); // Reset spawn timer
            createBuilding(); // Create initial building

            startOverlay.style.display = 'none';
            gameOverOverlay.style.display = 'none';
            scoreDisplay.style.display = 'block';

            gameLoop();
        }

        // Game over function
        function gameOver() {
            gameRunning = false;
            cancelAnimationFrame(animationFrameId); // Stop the game loop
            finalScoreDisplay.textContent = `SCORE: ${score}`;
            gameOverOverlay.style.display = 'flex';
            scoreDisplay.style.display = 'none';
        }

        // Event Listeners
        function handlePlayerInput() {
            if (gameRunning) {
                spaceship.flyUp();
            } else if (gameOverOverlay.style.display === 'flex') {
                // If game over, and input is received, restart
                startGame();
            } else if (startOverlay.style.display === 'flex') {
                // If on start screen, start game
                startGame();
            }
        }

        // Listen for spacebar press
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault(); // Prevent scrolling
                handlePlayerInput();
            }
        });

        // Listen for canvas click/touch
        canvas.addEventListener('click', handlePlayerInput);
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault(); // Prevent scrolling/zoom
            handlePlayerInput();
        });

        // Button listeners
        startButton.addEventListener('click', startGame);
        restartButton.addEventListener('click', startGame);

        // Resize canvas function
        function resizeCanvas() {
            const gameContainer = document.querySelector('.game-container');
            // Set canvas dimensions based on container's computed size
            canvas.width = gameContainer.clientWidth - 40; // Subtract padding
            canvas.height = gameContainer.clientHeight - 40; // Subtract padding

            // Re-center spaceship if game is not running (e.g., on initial load or resize)
            if (!gameRunning) {
                spaceship.y = canvas.height / 2;
                spaceship.x = canvas.width * 0.1; // Keep spaceship at 10% from left
            }
        }

        // Initial resize and add resize listener
        window.addEventListener('load', () => {
            resizeCanvas();
            // Position spaceship after initial canvas resize
            spaceship.x = canvas.width * 0.1;
            spaceship.y = canvas.height / 2;
        });
        window.addEventListener('resize', resizeCanvas);

    </script>
</body>
</html>
